<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Video Viewer</title>
<style>
body{font-family:Arial;background:#f5f5f7;padding:20px;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
h1{margin:0;}
a.admin-link{padding:6px 12px;background:#007bff;color:#fff;text-decoration:none;border-radius:4px;}
a.admin-link:hover{background:#0056b3;}
.video-card{background:#fff;padding:10px;margin:10px;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
video{width:100%;max-width:600px;border-radius:4px;}
</style>
</head>
<body>

<header>
  <h1>Video Viewer</h1>
  <a href="admin_login.html" class="admin-link">Admin Login</a>
</header>

<div id="videoList">Loading videos...</div>

<script>
const WEB_APP_URL="https://script.google.com/macros/s/AKfycbzq22Fzcm_w-IAAiDpqx2TQKkHJjKq7fnlP-5IdtrgwFG7Wo2HaDNFxro7tZKIoMol0/exec";
const videoListDiv=document.getElementById("videoList");

// JSONP callback
function loadVideos(){
  const cb="cb"+new Date().getTime();
  window[cb]=function(data){
    if(!data || data.length===0){ videoListDiv.innerHTML="<p>No videos uploaded yet.</p>"; return; }
    let html="";
    data.forEach(v=>{
      html+=`<div class="video-card">
        <h3>${v.title}</h3>
        <video controls>
          <source src="${v.direct_url}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>`;
    });
    videoListDiv.innerHTML=html;
  };
  const script=document.createElement("script");
  script.src=WEB_APP_URL+"?callback="+cb+"&_="+new Date().getTime();
  document.body.appendChild(script);
}

// Initial load
loadVideos();
setInterval(loadVideos,10000); // auto-refresh every 10s
</script>
</body>
</html>
