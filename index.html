<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Video Viewer</title>
<style>
body{font-family:Arial,sans-serif;padding:20px;background:#f5f5f7;}
h1{font-size:24px;margin-bottom:10px;}
#videoList div{margin:10px 0;padding:10px;background:#fff;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
#adminLink{position:fixed;top:10px;right:10px;padding:6px 12px;background:#007bff;color:#fff;border-radius:4px;text-decoration:none;}
</style>
</head>
<body>
<h1>Video Viewer</h1>
<div id="videoList">Loading videos...</div>
<a href="admin.html" id="adminLink">Admin</a>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzq22Fzcm_w-IAAiDpqx2TQKkHJjKq7fnlP-5IdtrgwFG7Wo2HaDNFxro7tZKIoMol0/exec";
const listContainer = document.getElementById("videoList");

// This function will be called by JSONP from Apps Script
function showVideos(data){
  window.json = data; // save globally if needed
  if(!data || data.length === 0){
    listContainer.innerHTML = "<p>No videos uploaded yet.</p>";
    return;
  }
  listContainer.innerHTML = "";
  data.forEach(v=>{
    const div = document.createElement("div");
    div.innerHTML = `
      <h3>${v.title}</h3>
      <video width="480" controls>
        <source src="${v.direct_url}" type="video/mp4">
        Your browser does not support HTML5 video.
      </video>
    `;
    listContainer.appendChild(div);
  });
}

// Load JSONP via script tag
const script = document.createElement("script");
script.src = WEB_APP_URL + "?callback=showVideos";
document.body.appendChild(script);
</script>
</body>
</html>
