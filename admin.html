<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Admin - Video List</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial,sans-serif;background:#f5f5f7;margin:0;padding:20px;color:#111;}
.wrap{max-width:900px;margin:0 auto;}
h1{margin-bottom:12px;}
label{display:block;margin-top:10px;font-weight:600;font-size:14px;}
input[type="text"], input[type="url"]{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box;}
button{padding:10px 14px;margin-top:12px;border-radius:8px;border:0;background:#0b79ff;color:white;cursor:pointer;}
button.secondary{background:#6c757d;margin-left:6px;}
.note{font-size:13px;color:#555;margin-top:8px;}
</style>
</head>
<body>
<div class="wrap">
<h1>Admin â€” Add Video</h1>
<label for="title">Title (manual)</label>
<input id="title" type="text" placeholder="Enter title">
<label for="url">Cloud URL (Google Drive, Dropbox, OneDrive)</label>
<input id="url" type="url" placeholder="Paste link here">
<div>
<button id="addBtn">Add Video</button>
</div>
<div class="note">Tip: URL will be auto-converted to direct playable link if supported.</div>
<div class="note"><a href="index.html">Go to Viewer Page</a></div>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzq22Fzcm_w-IAAiDpqx2TQKkHJjKq7fnlP-5IdtrgwFG7Wo2HaDNFxro7tZKIoMol0/exec";

const titleInput = document.getElementById('title');
const urlInput = document.getElementById('url');
const addBtn = document.getElementById('addBtn');

addBtn.addEventListener('click', async ()=>{
  const title = titleInput.value.trim();
  const url = urlInput.value.trim();
  if(!title){ alert("Please enter title"); titleInput.focus(); return; }
  if(!url){ alert("Please paste URL"); urlInput.focus(); return; }

  try{
    const resp = await fetch(WEB_APP_URL, {
      method:'POST',
      body: JSON.stringify({title:title, original_url:url}),
      headers:{'Content-Type':'application/json'}
    });
    const data = await resp.json();
    if(data.status==="success"){
      alert("Saved! Video added to Sheet.");
      titleInput.value = '';
      urlInput.value = '';
    } else {
      alert("Error saving video.");
    }
  } catch(err){
    console.error(err);
    alert("Error: "+err.message);
  }
});
</script>
</body>
</html>
